<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content='IE=edge' http-equiv=X-UA-Compatible> <meta content='width=device-width, initial-scale=1' name=viewport> <title>Core API Resources - Cider-Ci Documentation</title> <link href="../assets/stylesheets/app-30beb77e.css" rel=stylesheet /> <script src="../assets/javascripts/vendor-ce938919.js"></script> <script src="../assets/javascripts/app-72be183c.js"></script> </head> <body id=the-cider-ci-documentation> <div class=container> <nav class='navbar navbar-inverse'> <div class=container-fluid> <div class=navbar-header> <a class=navbar-brand href="../">Cider-CI <span class=semantic-version><span class=major>4</span><span class=divider>.</span><span class=minor>0</span><span class=divider>.</span><span class=patch>0</span><span class=divider>-</span><span class=pre>ALPHA</span><span class=divider>+</span><span class=build>16.14</span></span> Documentation </a></div> <form action='https://www.google.com/search' class='navbar-form navbar-left' method=get role=search> <div class=form-group> <input name=as_sitesearch type=hidden value='docs.cider-ci.info'> <input name=hl type=hidden value=en> <input class=form-control name=as_q placeholder=Search> <button class='btn btn-default' style='display: none' type=submit>Submit</button> </div> </form> <ul class='nav navbar-nav'> <li> <a href="../introduction/">Introduction </a></li> <li> <a href="../introduction/quick-start/">Quick-Start </a></li> <li> <a href="../sitemap.html">Sitemap </a></li> </ul> </div> </nav> <div class=row> <div class=col-md-6> <ol class=breadcrumb> <li> <a href="../">Home </a></li> <li> <a href="./">API </a></li> <li> <a href="api_resources.html">Resources </a></li> </ol> </div> <div class=col-md-6> </div> </div> <div class=content> <div class=row> <div id=table-of-contents class='col-md-5 col-md-push-7'> <h1>Table of Contents</h1> <ul> <li><a href="#core-api-resources"><span class=toc-section-number>1</span> Core API Resources</a><ul> <li><a href="#general-properties"><span class=toc-section-number>1.1</span> General Properties</a><ul> <li><a href="#content-types"><span class=toc-section-number>1.1.1</span> Content Types</a></li> <li><a href="#index-resources"><span class=toc-section-number>1.1.2</span> Index Resources</a></li> </ul></li> <li><a href="#root"><span class=toc-section-number>1.2</span> Root</a><ul> <li><a href="#get"><span class=toc-section-number>1.2.1</span> GET <code>/</code></a></li> </ul></li> <li><a href="#job"><span class=toc-section-number>1.3</span> Job</a><ul> <li><a href="#get-jobsid"><span class=toc-section-number>1.3.1</span> GET <code>/jobs/:id</code></a></li> </ul></li> <li><a href="#job-stats"><span class=toc-section-number>1.4</span> Job-Stats</a><ul> <li><a href="#get-jobidstats"><span class=toc-section-number>1.4.1</span> GET <code>/job/:id/stats</code></a></li> </ul></li> <li><a href="#jobs"><span class=toc-section-number>1.5</span> Jobs</a><ul> <li><a href="#post-jobscreate"><span class=toc-section-number>1.5.1</span> POST <code>/jobs/create</code></a></li> <li><a href="#get-jobs"><span class=toc-section-number>1.5.2</span> GET <code>/jobs/</code></a><ul> <li><a href="#query-parameters"><span class=toc-section-number>1.5.2.1</span> Query Parameters</a><ul> <li><a href="#branch_head"><span class=toc-section-number>1.5.2.1.1</span> <code>branch_head</code></a></li> <li><a href="#branch_descendants"><span class=toc-section-number>1.5.2.1.2</span> <code>branch_descendants</code></a></li> <li><a href="#key"><span class=toc-section-number>1.5.2.1.3</span> <code>key</code></a></li> <li><a href="#repository_url"><span class=toc-section-number>1.5.2.1.4</span> <code>repository_url</code></a></li> <li><a href="#job_specification_id"><span class=toc-section-number>1.5.2.1.5</span> <code>job_specification_id</code></a></li> <li><a href="#state"><span class=toc-section-number>1.5.2.1.6</span> <code>state</code></a></li> </ul></li> </ul></li> </ul></li> <li><a href="#task"><span class=toc-section-number>1.6</span> Task</a><ul> <li><a href="#get-tasksid"><span class=toc-section-number>1.6.1</span> GET <code>/tasks/:id</code></a></li> </ul></li> <li><a href="#tasks"><span class=toc-section-number>1.7</span> Tasks</a><ul> <li><a href="#get-jobsjob_idtasks"><span class=toc-section-number>1.7.1</span> GET <code>/jobs/:job_id/tasks/</code></a><ul> <li><a href="#query-parameters-1"><span class=toc-section-number>1.7.1.1</span> Query Parameters</a><ul> <li><a href="#state-1"><span class=toc-section-number>1.7.1.1.1</span> <code>state</code></a></li> </ul></li> </ul></li> </ul></li> <li><a href="#trial"><span class=toc-section-number>1.8</span> Trial</a><ul> <li><a href="#get-trialsid"><span class=toc-section-number>1.8.1</span> GET <code>/trials/:id</code></a></li> </ul></li> <li><a href="#trials"><span class=toc-section-number>1.9</span> Trials</a><ul> <li><a href="#post-tasksidtrialsretry"><span class=toc-section-number>1.9.1</span> POST <code>/tasks/:id/trials/retry</code></a></li> <li><a href="#get-taskstask_idtrials"><span class=toc-section-number>1.9.2</span> GET <code>/tasks/:task_id/trials/</code></a><ul> <li><a href="#query-parameters-2"><span class=toc-section-number>1.9.2.1</span> Query Parameters</a><ul> <li><a href="#state-2"><span class=toc-section-number>1.9.2.1.1</span> <code>state</code></a></li> </ul></li> </ul></li> </ul></li> <li><a href="#tree-attachment"><span class=toc-section-number>1.10</span> Tree-Attachment</a><ul> <li><a href="#get-tree-attachmentsid"><span class=toc-section-number>1.10.1</span> GET <code>/tree-attachments/:id</code></a></li> </ul></li> <li><a href="#tree-attachments"><span class=toc-section-number>1.11</span> Tree-Attachments</a><ul> <li><a href="#get-jobsjob_idattachments"><span class=toc-section-number>1.11.1</span> GET <code>/jobs/:job_id/attachments/</code></a></li> </ul></li> <li><a href="#trial-attachment"><span class=toc-section-number>1.12</span> Trial-Attachment</a><ul> <li><a href="#get-trial-attachmentsid"><span class=toc-section-number>1.12.1</span> GET <code>/trial-attachments/:id</code></a></li> </ul></li> <li><a href="#trial-attachments"><span class=toc-section-number>1.13</span> Trial-Attachments</a><ul> <li><a href="#get-trialstrial_idtrial-attachments"><span class=toc-section-number>1.13.1</span> GET <code>/trials/:trial_id/trial-attachments/</code></a></li> </ul></li> </ul></li> </ul> </div> <div class='col-md-7 col-md-pull-5'> <h1 id=core-api-resources><span class=header-section-number>1</span> Core API Resources</h1> <p>All of the resources in this section are prefixed with <code>/cider-ci/api</code>. This prefix is omitted for brevity in the following.</p> <h2 id=general-properties><span class=header-section-number>1.1</span> General Properties</h2> <h3 id=content-types><span class=header-section-number>1.1.1</span> Content Types</h3> <p>The core API supports the content types <code>application/json-roa+json</code> and <code>application/json</code> for <code>GET</code> requests to all resources. The former includes hyperlinks to related resources and to this documentation.</p> <p>The API evaluates the accept header including the <code>q</code> parameter, see <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html">Section 14 of RFC 2616</a> . The content type <code>application/json-roa+json</code> as a higher quality of service and is thus preferred. If no matching accept header is supplied the content-type <code>application/json-roa+json</code> will be used.</p> <p>All data requests containing a body like <code>PUT</code>, <code>PATCH</code>, and <code>POST</code> support the content type <code>application/json</code>.</p> <h3 id=index-resources><span class=header-section-number>1.1.2</span> Index Resources</h3> <p>Several resources are conceptually indexes, e.g. <code>/jobs/</code>, which rather return several references to the same kind of resource, e.g. <code>/job/:id</code>. All of these indexes are paginated an use the <code>page</code> parameter with an integer value for iteration.</p> <p>The content type <code>application/json-roa+json</code> includes a <code>next</code> link which should be used to iterate index resources.</p> <h2 id=root><span class=header-section-number>1.2</span> Root</h2> <h3 id=get><span class=header-section-number>1.2.1</span> GET <code>/</code></h3> <p>The entry-point.</p> <h2 id=job><span class=header-section-number>1.3</span> Job</h2> <h3 id=get-jobsid><span class=header-section-number>1.3.1</span> GET <code>/jobs/:id</code></h3> <p>Returns the properties of the corresponding <em>Job</em>.</p> <h2 id=job-stats><span class=header-section-number>1.4</span> Job-Stats</h2> <h3 id=get-jobidstats><span class=header-section-number>1.4.1</span> GET <code>/job/:id/stats</code></h3> <p>Returns the aggregated count of the number of tasks belonging to an <em>Job</em> with respect to their state.</p> <h2 id=jobs><span class=header-section-number>1.5</span> Jobs</h2> <h3 id=post-jobscreate><span class=header-section-number>1.5.1</span> POST <code>/jobs/create</code></h3> <p>Create a new job. Requires the body of the JSON encoded request must contain a map with the keys <code>tree_id</code> and <code>key</code>.</p> <h3 id=get-jobs><span class=header-section-number>1.5.2</span> GET <code>/jobs/</code></h3> <p>Returns a list of links each pointing to a <code>Job</code>. Order is descending by <code>created_at</code>.</p> <h4 id=query-parameters><span class=header-section-number>1.5.2.1</span> Query Parameters</h4> <h5 id=branch_head><span class=header-section-number>1.5.2.1.1</span> <code>branch_head</code></h5> <p>Filters the jobs of commits which are directly referenced by the given branch with name equal to the given value.</p> <p>Query string example: <code>?branch=master</code></p> <p>Note: this filter is case insensitive with respect to <em>branch-name</em>.</p> <h5 id=branch_descendants><span class=header-section-number>1.5.2.1.2</span> <code>branch_descendants</code></h5> <p>Similar as above, however it will also include all descendants of the commit referenced by the given branch name.</p> <p>Examples:</p> <ol type=1> <li><p>Descendants of the branch master: <code>?branch_descendants=master</code></p></li> <li><p>A combination of <code>branch_head</code> and <code>branch_descendants</code> can make sense: <code>?branch_descendants=next&amp;branch_head=master</code>, read: give me the jobs of the commit where the branch master points to and which are descendants of the branch next.</p></li> </ol> <h5 id=key><span class=header-section-number>1.5.2.1.3</span> <code>key</code></h5> <p>Filters the jobs by their key as defined in the project configuration.</p> <h5 id=repository_url><span class=header-section-number>1.5.2.1.4</span> <code>repository_url</code></h5> <p>Filters the jobs related to commits within repositories with the url equal to the value of the parameter.</p> <h5 id=job_specification_id><span class=header-section-number>1.5.2.1.5</span> <code>job_specification_id</code></h5> <p>Filters the jobs to those having referencing the given <code>job_specification_id</code>.</p> <h5 id=state><span class=header-section-number>1.5.2.1.6</span> <code>state</code></h5> <p>Filters the jobs with state equal to the value of the parameter.</p> <p>Query string example: <code>?branch-name=master&amp;repository-name=leihs&amp;state=success</code></p> <h2 id=task><span class=header-section-number>1.6</span> Task</h2> <h3 id=get-tasksid><span class=header-section-number>1.6.1</span> GET <code>/tasks/:id</code></h3> <p>Returns the properties of the corresponding <code>Task</code>.</p> <h2 id=tasks><span class=header-section-number>1.7</span> Tasks</h2> <h3 id=get-jobsjob_idtasks><span class=header-section-number>1.7.1</span> GET <code>/jobs/:job_id/tasks/</code></h3> <p>Returns a list of links each pointing to a <code>Task</code> which belongs to <code>Job</code> with the id <code>:job_id</code>. Order is ascending with respect to the <code>name</code> property.</p> <h4 id=query-parameters-1><span class=header-section-number>1.7.1.1</span> Query Parameters</h4> <h5 id=state-1><span class=header-section-number>1.7.1.1.1</span> <code>state</code></h5> <p>Filters <code>Tasks</code> with state equal to the value of the parameter.</p> <p>Query string example: <code>?page=0&amp;state=failed</code></p> <h2 id=trial><span class=header-section-number>1.8</span> Trial</h2> <h3 id=get-trialsid><span class=header-section-number>1.8.1</span> GET <code>/trials/:id</code></h3> <p>Returns the properties of the trial with the id <code>:id</code>.</p> <h2 id=trials><span class=header-section-number>1.9</span> Trials</h2> <h3 id=post-tasksidtrialsretry><span class=header-section-number>1.9.1</span> POST <code>/tasks/:id/trials/retry</code></h3> <p>Create a new trial for this tasks.</p> <h3 id=get-taskstask_idtrials><span class=header-section-number>1.9.2</span> GET <code>/tasks/:task_id/trials/</code></h3> <p>Returns a list of links each pointing to a trial which belongs to the task with the id <code>:task_id</code>. Order is descending with respect to the <code>updated_at</code> property.</p> <h4 id=query-parameters-2><span class=header-section-number>1.9.2.1</span> Query Parameters</h4> <h5 id=state-2><span class=header-section-number>1.9.2.1.1</span> <code>state</code></h5> <p>Filters trials with state equal to the value of the parameter.</p> <p>Query string example: <code>?page=0&amp;state=failed</code></p> <h2 id=tree-attachment><span class=header-section-number>1.10</span> Tree-Attachment</h2> <h3 id=get-tree-attachmentsid><span class=header-section-number>1.10.1</span> GET <code>/tree-attachments/:id</code></h3> <p>Returns the properties of a <em>Tree-Attachment</em>.</p> <p>This does not return the data-stream of the attachment itself. A hyperlink to the latter is included in <code>application/json-roa+json</code> response types, see <a href="#content-types">Content Types</a>.</p> <h2 id=tree-attachments><span class=header-section-number>1.11</span> Tree-Attachments</h2> <h3 id=get-jobsjob_idattachments><span class=header-section-number>1.11.1</span> GET <code>/jobs/:job_id/attachments/</code></h3> <p>Returns a list of ids each belonging to a <em>Tree-Attachment</em> which belongs to the <em>Job</em> with the id <code>:job_id</code>. Note, the <code>tree_id</code> is a inherent property of every <em>Job</em>. Order is ascending with respect to the <code>path</code> property.</p> <h2 id=trial-attachment><span class=header-section-number>1.12</span> Trial-Attachment</h2> <h3 id=get-trial-attachmentsid><span class=header-section-number>1.12.1</span> GET <code>/trial-attachments/:id</code></h3> <p>Returns the properties of a <em>Trial-Attachment</em>.</p> <p>This does not return the data-stream of the attachment itself. A hyperlink to the latter is included in <code>application/json-roa+json</code> response types, see <a href="#content-types">Content Types</a>.</p> <h2 id=trial-attachments><span class=header-section-number>1.13</span> Trial-Attachments</h2> <h3 id=get-trialstrial_idtrial-attachments><span class=header-section-number>1.13.1</span> GET <code>/trials/:trial_id/trial-attachments/</code></h3> <p>Returns a list of ids. Each belongs to a <em>Trial-Attachment</em> which belongs to the trial with the id <code>:trial_id</code>. Order is ascending with respect to the <code>path</code> property.</p> </div> </div class=row> </div> </div> </body> </html>