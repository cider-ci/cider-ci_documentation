jobs:

  aborting:

    name: Abort and Retry Demo
    description: |
      This job is used for testing the 'abort and retry' feature.
      It doesn't do much on its own.

    context:

      task-defaults:
        exclusive-global-resources:
          any: true
        traits:
          bash: true
        scripts:
          main:
            body: sleep 10
          clean-up:
            body: sleep 5
            ignore-abort: true
            start-when:
              - script: main
                states: [aborted, passed, failed, skipped]

      tasks:
        t1: {}
        t2: {}

