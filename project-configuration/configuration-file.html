<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content='IE=edge' http-equiv=X-UA-Compatible> <meta content='width=device-width, initial-scale=1' name=viewport> <title>Project Configuration File - Cider-Ci Documentation</title> <link href="../assets/stylesheets/app-b5c8715a.css" rel=stylesheet /> <script src="../assets/javascripts/vendor-1e8b60d8.js"></script> <script src="../assets/javascripts/app-871935e9.js"></script> </head> <body id=the-cider-ci-documentation> <div class=container> <nav class='navbar navbar-inverse'> <div class=container-fluid> <div class=navbar-header> <a class=navbar-brand href="../">Cider-CI Documentation </a></div> <form action='/search.html' class='navbar-form navbar-left' id=search method=get role=search> <div class=form-group> <input class=form-control id=search-term name=term placeholder=Search> <button class='btn btn-default' style='display: none' type=submit>Submit</button> </div> </form> <ul class='nav navbar-nav'> <li> <a href="../introduction/">Introduction </a></li> <li> <a href="../introduction/quick-start/">Quick-Start </a></li> <li> <a href="../sitemap.html">Sitemap </a></li> </ul> </div> </nav> <div class=row> <div class=col-md-6> <ol class=breadcrumb> <li> <a href="../">Home </a></li> <li> <a href="./">Project Configuration </a></li> <li> <a href="configuration-file.html">Configuration File </a></li> </ol> </div> <div class=col-md-6> </div> </div> <div class=content> <h1 id=configuration-file class=no_toc>The Cider-CI Configuration File</h1> <ul id=markdown-toc> <li><a id=markdown-toc-filenames href="#filenames">Filenames</a></li> <li><a id=markdown-toc-accepted-formats href="#accepted-formats">Accepted Formats</a></li> <li><a id=markdown-toc-getting-started href="#getting-started">Getting Started</a></li> <li><a id=markdown-toc-canonical-syntax-versus-compact-notation href="#canonical-syntax-versus-compact-notation">Canonical Syntax versus Compact Notation</a></li> <li><a id=markdown-toc-validation-of-the-specification href="#validation-of-the-specification">Validation of the Specification</a></li> <li><a id=markdown-toc-reserved-keywords href="#reserved-keywords">Reserved Keywords</a></li> <li><a id=markdown-toc-where-to-go-from-here href="#where-to-go-from-here">Where to go from here</a></li> </ul> <p>Cider-CI reads the specification to create and run jobs from a file in the top level directory of your project. This page gives an introduction how to write a Cider-CI project file. The more formal <a href="specification/">Cider-CI Project Specification</a> lists all available keys and configuration options of Cider-CI.</p> <h2 id=filenames>Filenames</h2> <p>Cider-CI will look for the following files to read the configuration:</p> <ol> <li><code>cider-ci_v4.yml</code>,</li> <li><code>.cider-ci_v4.yml</code>,</li> <li><code>cider-ci_v4.json</code>,</li> <li><code>.cider-ci_v4.json</code>,</li> <li><code>cider-ci.yml</code>,</li> <li><code>.cider-ci.yml</code>,</li> <li><code>cider-ci.json</code>, and</li> <li><code>.cider-ci.json</code>.</li> </ol> <p>The first file found will be used and any further will be ignored. The Cider-CI User Interface will show a warning if none of the possible configuration files have been found.</p> <h2 id=accepted-formats>Accepted Formats</h2> <p>As indicated by the extension of the files Cider-CI accepts either <a href="http://www.yaml.org/">YAML</a> or <a href="http://json.org/">JSON</a> format. YAML is technically a superset of JSON, by capability and syntax. Cider-CI uses only features of YAML which can be presented in JSON. We prefer to use YAML for examples in this documentation.</p> <h2 id=getting-started>Getting Started</h2> <div class=row> <div class=col-md-5> <p>The example specifies one job with one task and inside a very simple script. It exits with status 0 which indicates that the script has <code>passed</code>. The script itself is written so it will work with under either <em>Linux</em>, <em>Mac OS</em>, or <em>Windows</em>.</p> </div> <div class=col-md-7> <div class="language-yml highlighter-coderay"><div class=CodeRay> <div class=code><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span style="color:#606">jobs</span>:
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>  <span style="color:#606">introduction-demo</span>:
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Introduction Demo and Example Job</span></span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>    <span style="color:#606">description</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">|</span><span style="color:#D20"></span></span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">      A very concise job declaration which uses the compact notation.</span></span>
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>    <span style="color:#606">task</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">|</span><span style="color:#D20"></span></span>
<span class="line-numbers"><a href="#n7" name="n7">7</a></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">      :; exit 0</span></span>
<span class="line-numbers"><a href="#n8" name="n8">8</a></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">      exit /b 0</span></span>
</pre></div> </div> </div> </div> </div> <h2 id=canonical-syntax-versus-compact-notation>Canonical Syntax versus Compact Notation</h2> <div class=row> <div class=col-md-5> <p>The previous example is written in <em>compact notation</em>. The compact notation is short and easy to read. However, many configuration options can not be expressed in compact notation and thus only simple jobs can be written in this format.</p> <p>Internally Cider-CI converts the <em>compact notation</em> into its <em>canonical syntax</em> before evaluating it. The same configuration in <em>canonical syntax</em> would read like the example given here.</p> </div> <div class=col-md-7> <div class="language-yaml highlighter-coderay"><div class=CodeRay> <div class=code><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span style="color:#606">jobs</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>  <span style="color:#606">introduction-demo</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>    <span style="color:#606">key</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">introduction-demo</span></span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>    <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Introduction Demo and Example Job</span></span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>    <span style="color:#606">description</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">A very concise job declaration which uses the compact notation.</span></span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>    <span style="color:#606">context</span>:
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>      <span style="color:#606">tasks</span>:
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>        <span style="color:#606"><span style="color:#404">'</span><span>0</span><span style="color:#404">'</span></span>:
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>          <span style="color:#606">scripts</span>:
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>            <span style="color:#606">main</span>:
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>              <span style="color:#606">body</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">|</span><span style="color:#D20"></span></span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">                :; exit 0</span></span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">                exit /b 0</span></span>
</pre></div> </div> </div> </div> </div> <h2 id=validation-of-the-specification>Validation of the Specification</h2> <p>Much of what is happening inside Cider-CI adheres to the <a href="https://en.wikipedia.org/wiki/Fail-fast">fail-fast</a> principle. To that end Cider-CI has a <strong>validator</strong> which will parse the project configuration. It will show a warnings and prevent any execution when it encounters <strong>unspecified keys</strong>, if <strong>values are of wrong type</strong>, or if they <strong>can not be parsed</strong>.</p> <p>On the one hand the validator might feel annoying at times. But we believe that such a rigorous validation is a very important quality of a CI system. In the end it lets you write your configuration faster and more efficient since it frees you from double and triple checking it.</p> <h2 id=reserved-keywords>Reserved Keywords</h2> <p>The keywords of the maps used in the Cider-CI configuration play important roles. In the case of a job the keyword is used to identify a job uniquely and reference it when declaring dependencies for example. Those keywords may be chosen freely with a few exceptions.</p> <p class=text-warning>The keyword <code>include</code> and any keyword starting with <code>_cider-ci</code> is reserved and may not be used.</p> <h2 id=where-to-go-from-here>Where to go from here</h2> <p>The more formal <a href="specification/">Cider-CI Project Specification</a> lists all available keys and configuration options of Cider-CI. The <a href="advanced/data-flow.html">data flow</a> page describes the transformations applied to the configuration file.</p> </div> <div class=row> <div class=col-md-12> <footer> <div class=pull-right> Cider-CI <span class=semantic-version><span class=major>4</span><span class=divider>.</span><span class=minor>1</span><span class=patch-pre-build><span class=divider>.</span><span class=patch>0</span><span class=divider>-</span><span class=pre>0.0</span></span></span> Documentation 2016-07-24 © Thomas Schank and contributors </div> </footer> </div> </div> </div> </body> </html>