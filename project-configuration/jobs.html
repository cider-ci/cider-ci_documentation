<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content='IE=edge' http-equiv=X-UA-Compatible> <meta content='width=device-width, initial-scale=1' name=viewport> <title>Cider-CI Docs</title> <link href="../assets/stylesheets/app-9123878f.css" rel=stylesheet /> <script src="../assets/javascripts/vendor-e7dce3cb.js"></script> <script src="../assets/javascripts/app-72be183c.js"></script> </head> <body id=the-cider-ci-documentation> <nav class='navbar navbar-inverse navbar-fixed-top'> <div class=container-fluid> <div class=navbar-header> <button aria-controls=navbar aria-expanded=false class='navbar-toggle collapsed' data-target='#navbar' data-toggle=collapse type=button> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href="../">Cider-CI <span class=semantic-version><span class=major>3</span><span class=divider>.</span><span class=minor>0</span></span> Documentation </a></div> <div class='navbar-collapse collapse' id=navbar> <ul class='nav navbar-nav'> <li class=dropdown> <a class=dropdown-toggle data-toggle=dropdown href="#"><strong>Introduction</strong> <span class=caret></span> </a><ul class=dropdown-menu> <li> <a href="../introduction/">Introduction </a></li> </ul> </li> <li class=dropdown> <a class=dropdown-toggle data-toggle=dropdown href="#"><strong>Installation</strong> <span class=caret></span> </a><ul class=dropdown-menu> <li> <a href="../installation/">Installation </a></li> </ul> </li> <li class=dropdown> <a class=dropdown-toggle data-toggle=dropdown href="#"><strong>Project Configuration</strong> <span class=caret></span> </a><ul class=dropdown-menu> <li> <a href="./">Project Configuration </a></li> <li> <a href="dotfile.html">Dotfile </a></li> <li> <a href="jobs.html">Jobs </a></li> <li> <a href="tasks.html">Tasks </a></li> <li> <a href="scripts.html">Scripts </a></li> <li> <a href="advanced.html">Advanced Topics </a></li> </ul> </li> <li class=dropdown> <a class=dropdown-toggle data-toggle=dropdown href="#"><strong>API</strong> <span class=caret></span> </a><ul class=dropdown-menu> <li> <a href="../api/">API </a></li> <li> <a href="../api/api_resources.html">Core API Resources </a></li> <li> <a href="../api/storage_resources.html">Storage API Resources </a></li> </ul> </li> <li class=dropdown> <a class=dropdown-toggle data-toggle=dropdown href="#"><strong>Development</strong> <span class=caret></span> </a><ul class=dropdown-menu> <li> <a href="../development/architecture/">Architecture </a></li> <li> <a href="../development/setup/">Setup </a></li> </ul> </li> </ul> </div> </div> </nav> <div class=container-fluid> <div class=row> <div class='col-sm-3 col-md-2 sidebar'> <ul class='nav nav-sidebar'> <li class=''> <a class=alike href="../introduction/"><strong>Introduction</strong> </a></li> </ul> <ul class='nav nav-sidebar'> <li class=''> <a class=alike href="../installation/"><strong>Installation</strong> </a></li> </ul> <ul class='nav nav-sidebar'> <li class=''> <a class=alike href="./"><strong>Project Configuration</strong> </a></li> <ul class='nav nav-sidebar'> <li class=''> <a href="dotfile.html">Dotfile </a></li> </ul> <ul class='nav nav-sidebar'> <li class=active> <a href="jobs.html">Jobs </a><ul class=toc></ul> </li> </ul> <ul class='nav nav-sidebar'> <li class=''> <a href="tasks.html">Tasks </a></li> </ul> <ul class='nav nav-sidebar'> <li class=''> <a href="scripts.html">Scripts </a></li> </ul> <ul class='nav nav-sidebar'> <li class=''> <a href="advanced.html">Advanced Topics </a></li> </ul> </ul> <ul class='nav nav-sidebar'> <li class=''> <a class=alike href="../api/"><strong>API</strong> </a></li> <ul class='nav nav-sidebar'> <li class=''> <a href="../api/api_resources.html">Core API Resources </a></li> </ul> <ul class='nav nav-sidebar'> <li class=''> <a href="../api/storage_resources.html">Storage API Resources </a></li> </ul> </ul> <ul class='nav nav-sidebar'> <li class=''> <span class=alike> <strong>Development</strong> </span> </li> <ul class='nav nav-sidebar'> <li class=''> <a href="../development/architecture/">Architecture </a></li> </ul> <ul class='nav nav-sidebar'> <li class=''> <a href="../development/setup/">Setup </a></li> </ul> </ul> </div> <div class='col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main'> <h1 id=jobs>Jobs</h1> <p>The <code>jobs</code> key introduces a map of maps, see <a href="advanced.html#map-of-maps">Map of Maps</a> in <a href="advanced.html">Advanced Topics</a>, each mapping to a <a href="#job">Job</a>. This structure specifies available jobs and relations between them.</p> <h2 id=example>Example</h2> <div class="highlight yaml"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class=lineno>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></td><td class=code><pre><span class="s">jobs</span><span class="pi">:</span>

  <span class="s">job-prerequisite</span><span class="pi">:</span>

    <span class="s">name</span><span class="pi">:</span> <span class="s">Jobs - Dependencies and Triggers - Prerequisite</span> 
    <span class="s">description</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="no">This one serves as a prerequisite to "job-depends".</span>
      <span class="no">Additionally it will be automatically triggered if a branch matching the</span>
      <span class="no">regular expression /^trigger-prerequisite$/ is updated. </span>

    <span class="s">start-on</span><span class="pi">:</span> 
    <span class="pi">-</span> <span class="s">type</span><span class="pi">:</span> <span class="s">branch.updated</span>
      <span class="s">include-match</span><span class="pi">:</span> <span class="s">^trigger-prerequisite$</span>

    <span class="s">context</span><span class="pi">:</span> <span class="pi">{}</span>

<span class="err">  </span><span class="s">job-dependent</span><span class="pi">:</span>

    <span class="s">name</span><span class="pi">:</span> <span class="s">Jobs - Dependencies and Triggers - Dependent</span>
    <span class="s">description</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="no">This demo can only be started if the "job-prerequisite" has passed. There</span>
      <span class="no">is also a corresponding trigger defined for the sake of demonstration. </span>

    <span class="s">depends-on</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">type</span><span class="pi">:</span> <span class="s">job</span>
      <span class="s">job</span><span class="pi">:</span> <span class="s">job-prerequisite</span>
      <span class="s">states</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">passed</span><span class="pi">]</span>

    <span class="s">start-on</span><span class="pi">:</span> 
    <span class="pi">-</span> <span class="s">type</span><span class="pi">:</span> <span class="s">job.updated</span>
      <span class="s">job</span><span class="pi">:</span> <span class="s">job-prerequisite</span>
      <span class="s">states</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">passed</span><span class="pi">]</span>

    <span class="s">context</span><span class="pi">:</span> <span class="pi">{}</span>
</pre></td></tr></tbody></table> </div> <p>The above example has some properties removed from the original <a href="../demo-project/cider-ci/jobs/job-dependencies.yml">job-dependencies.yml</a> to highlight the essence for this page.</p> <h1 id=job>The Job</h1> <p>The keys of the <em>jobs</em> map name available jobs for reference. The values describe, specify and relate them.</p> <table class="table table-striped"> <thead> <tr> <th>Key/Property</th> <th>Presence</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>name</code></td> <td>yes<sup id="fnref:r"><a href="#fn:r" class=footnote>1</a></sup></td> <td>String - The visible name of the job.</td> </tr> <tr> <td><code>description</code></td> <td>optional</td> <td>String</td> </tr> <tr> <td><code>context</code></td> <td>required</td> <td>Map - Container for Tasks and related properties.</td> </tr> <tr> <td><code>job-key</code><sup id="fnref:i"><a href="#fn:i" class=footnote>2</a></sup></td> <td>yes<sup id="fnref:i:1"><a href="#fn:i" class=footnote>2</a></sup></td> <td>String - The stringfied representation of key in the <code>jobs</code> map.</td> </tr> <tr> <td><code>depends-on</code></td> <td>optional</td> <td>Array of Maps - The jobs and their state on which the job depends on (combined with conjunction). Example: <a href="../demo-project/cider-ci/jobs/job-dependencies.yml">job-dependencies</a></td> </tr> <tr> <td><code>start-on</code></td> <td>optional</td> <td>Array of Maps - Events on which the job will be automatically started (combined with disjunction). Example: <a href="../demo-project/cider-ci/jobs/job-dependencies.yml">job-dependencies</a></td> </tr> </tbody> </table> <div class=footnotes> <ol> <li id="fn:r"> <p>Defaults to the string that represents the key. <a href="#fnref:r" class=reversefootnote>&#8617;</a></p> </li> <li id="fn:i"> <p>This is an invisible or virtual property in the dotfile. It is used during evaluation of the dotfile where any existing value would be overwritten. <a href="#fnref:i" class=reversefootnote>&#8617;</a> <a href="#fnref:i:1" class=reversefootnote>&#8617;<sup>2</sup></a></p> </li> </ol> </div> </div> </div> </div> </body> </html>