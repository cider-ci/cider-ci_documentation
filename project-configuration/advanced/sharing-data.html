<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content='IE=edge' http-equiv=X-UA-Compatible> <meta content='width=device-width, initial-scale=1' name=viewport> <title>Sharing Data - Cider-Ci Documentation</title> <link href="../../assets/stylesheets/app-b5c8715a.css" rel=stylesheet /> <script src="../../assets/javascripts/vendor-1e8b60d8.js"></script> <script src="../../assets/javascripts/app-871935e9.js"></script> </head> <body id=the-cider-ci-documentation> <div class=container> <nav class='navbar navbar-inverse'> <div class=container-fluid> <div class=navbar-header> <a class=navbar-brand href="../../">Cider-CI Documentation </a></div> <form action='/search.html' class='navbar-form navbar-left' id=search method=get role=search> <div class=form-group> <input class=form-control id=search-term name=term placeholder=Search> <button class='btn btn-default' style='display: none' type=submit>Submit</button> </div> </form> <ul class='nav navbar-nav'> <li> <a href="../../introduction/">Introduction </a></li> <li> <a href="../../introduction/quick-start/">Quick-Start </a></li> <li> <a href="../../sitemap.html">Sitemap </a></li> </ul> </div> </nav> <div class=row> <div class=col-md-6> <ol class=breadcrumb> <li> <a href="../../">Home </a></li> <li> <a href="../">Project Configuration </a></li> <li> <a href="./">Advanced Topics </a></li> <li> <a href="sharing-data.html">Sharing Data </a></li> </ol> </div> <div class=col-md-6> </div> </div> <div class=content> <h1 id=sharing-data>Sharing Data</h1> <p>We discuss how Cider-CI enables the sharing and reuse of configuration data within and even across projects.</p> <h2 id=the-include-statement>The <code>include</code> Statement</h2> <div class=row> <div class=col-md-6> <p>The value of <code>include</code> is in its simplest form a string which represents a path to a JSON or YAML file in the project. Multiple files can be referenced by an array of strings. The <code>include</code> keyword is necessarily embedded in a map. The <strong>top level element</strong> of the referenced file <strong>must be a map</strong>. This is necessary so the <code>deep-merge</code> operation discussed on the <a href="composing-data.html">composing data</a> can be applied.</p> <p>We use the symbol <code>⊕</code> to denote <code>deep-merge</code> in the following. Let the <code>include</code> statement be contained in the map <code>M</code>. The maps of the included files are denoted with <code>M1</code>, <code>M2</code>, and so forth where the number corresponds to the index in the array. Then the resulting map is given by <code>M1 ⊕ M2 ⊕ ... ⊕ M</code>. The key observation is that conflicting <strong>keys with higher index override those with lower index</strong> and that <strong>keys of the map with the include statement have the highest precedence</strong> of all.</p> <p>The <code>include</code> directive may appear in <strong>any map at any level</strong>. Further, <strong>files being included may contain <code>include</code> statements</strong>, too. The merging strategy will by applied <strong>recursively in <a href="http://en.wikipedia.org/wiki/Depth-first_search">DFS</a> order</strong> until all <code>include</code> statements have been replaced. It is illegal to define circular references, they will result in an error.</p> </div> <div class=col-md-6> <div class="language-yaml highlighter-coderay"><div class=CodeRay> <div class=code><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span style="color:#606">include</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cider-ci/shared.yml</span></span>
</pre></div> </div> </div> <div class="language-yaml highlighter-coderay"><div class=CodeRay> <div class=code><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span style="color:#606">include</span>:
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cider-ci/meta/context.yml</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cider-ci/tests/context.yml</span></span>
</pre></div> </div> </div> </div> </div> <h2 id=sharing-configuration-data-between-projects>Sharing Configuration Data between Projects</h2> <div class=row> <div class=col-md-6> <p>Configuration data can be shared between projects via <a href="https://git-scm.com/docs/git-submodule">git submodules</a>. To specify the submodule path the include statement must be given in its <strong>full form</strong>: an <strong>array of maps each containing a <code>path</code> and <code>submodule</code></strong> key. The value of the <code>path</code> is string representing the file in the project or submodule. The value of the <code>submodule</code> is an array of strings. Each string represents the path to the submodule in the project. The array enables references to nested submodules.</p> <p>Every referenced <strong>submodule</strong> must be configured as a <strong>project in the Cider-CI instance</strong> and the <strong>referenced commit</strong> must be known by the <strong>Cider-CI</strong> instance.</p> </div> <div class=col-md-6> <div class="language-yaml highlighter-coderay"><div class=CodeRay> <div class=code><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span style="color:#606">include</span>:
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">path: cider-ci/meta/context.yml</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">path: cider-ci/tests/context.yml</span></span>
</pre></div> </div> </div> <div class="language-yaml highlighter-coderay"><div class=CodeRay> <div class=code><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span style="color:#606">include</span>:
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">path: cider-ci/tests.yml</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    <span style="color:#606">submodule</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">['builder']</span></span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">path: cider-ci/jobs/integration-tests.yml</span></span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>    <span style="color:#606">submodule</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">['integration-tests']</span></span>
</pre></div> </div> </div> </div> </div> </div> <div class=row> <div class=col-md-12> <footer> <div class=pull-right> Cider-CI <span class=semantic-version><span class=major>4</span><span class=divider>.</span><span class=minor>1</span><span class=patch-pre-build><span class=divider>.</span><span class=patch>0</span><span class=divider>-</span><span class=pre>0.0</span></span></span> Documentation 2016-07-24 © Thomas Schank and contributors </div> </footer> </div> </div> </div> </body> </html>